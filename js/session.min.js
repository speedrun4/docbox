var sess_intervalID,sess_lastActivity,sess_pollInterval=6e5,sess_expirationMinutes=180,sess_warningMinutes=sess_expirationMinutes-1;function initSessionMonitor(){sess_lastActivity=new Date,sessSetInterval(),$(document).bind("keypress.session",function(s,e){sessKeyPressed(s,e)})}function sessSetInterval(){sess_intervalID=setInterval("sessInterval()",sess_pollInterval)}function sessClearInterval(){clearInterval(sess_intervalID)}function sessKeyPressed(s,e){sess_lastActivity=new Date}function sessPingServer(){$.get("core/actions/ping.php")}function sessLogOut(){window.location.href="core/actions/doLogout.php"}function sessInterval(){var s=new Date,e=s-sess_lastActivity,t=e/1e3/60;t>=sess_warningMinutes&&(sessClearInterval(),confirm("("+s.toTimeString()+")\nSua sessão está expirando em "+(sess_expirationMinutes-sess_warningMinutes)+" minutos. Clique em OK para continuar logado ou Cancelar para sair.")?(t=(e=(s=new Date)-sess_lastActivity)/1e3/60)>sess_expirationMinutes?sessLogOut():(sessPingServer(),sessSetInterval(),sess_lastActivity=new Date):sessLogOut())}